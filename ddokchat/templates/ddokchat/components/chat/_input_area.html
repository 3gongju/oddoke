<!-- ddokchat/templates/ddokchat/components/chat/_input_area.html 수정 -->

<div id="messageInputArea" class="bg-gray-50 border-t border-gray-300 px-4 py-3">
  {% if room.is_fully_completed %}
    <div class="text-center text-sm text-gray-500 py-4">
      ✅ 거래가 완료되어 더 이상 채팅을 보낼 수 없습니다.
    </div>
  {% else %}
  <div class="flex items-center gap-3">
    <!-- 플러스 버튼 -->
    <div class="relative">
      <button id="plus-menu-btn" class="p-2 cursor-pointer text-gray-600 hover:text-gray-900 hover:bg-gray-200 rounded-full transition-colors">
        <!-- Heroicons Plus Icon -->
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.5v15m7.5-7.5h-15"></path>
        </svg>
      </button>
      
      <!-- 플러스 버튼 드롭다운 메뉴 -->
      <div id="plus-menu" class="absolute bottom-12 left-0 bg-white border border-gray-200 rounded-xl shadow-lg py-3 min-w-[180px] hidden">
        <button id="send-image-btn" class="w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center transition-colors">
          <!-- Heroicons Photo Icon -->
          <svg class="w-5 h-5 mr-3 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"></path>
          </svg>
          사진/동영상
        </button>
        <button id="send-account-btn" class="w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center transition-colors">
          <!-- Heroicons Credit Card Icon -->
          <svg class="w-5 h-5 mr-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"></path>
          </svg>
          계좌 공유
        </button>
        <button id="send-address-btn" class="w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center transition-colors">
          <!-- Heroicons Map Pin Icon -->
          <svg class="w-5 h-5 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25s-7.5-4.108-7.5-11.25a7.5 7.5 0 1 1 15 0Z"></path>
          </svg>
          주소 공유
        </button>
        <!-- NEW: 사기조회 버튼 추가 -->
        <button id="manual-fraud-check-btn" class="w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 flex items-center transition-colors">
          <!-- Heroicons Shield Exclamation Icon -->
          <svg class="w-5 h-5 mr-3 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"></path>
          </svg>
          사기조회
        </button>
      </div>
    </div>
        
    <!-- 메시지 입력창 -->
    <div class="flex-1 relative">
      <input 
        id="chat-message-input" 
        type="text" 
        class="w-full px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent text-sm bg-white"
        placeholder="메시지를 입력하세요..."
      >
    </div>
    
    <!-- 전송 버튼 -->
    <button 
      id="chat-message-submit" 
      class="bg-gray-900 hover:bg-black text-white p-3 rounded-full transition-colors shadow-md hover:shadow-lg"
    >
      <!-- Heroicons Paper Airplane Icon -->
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"></path>
      </svg>
    </button>
  </div>
  
  <!-- 숨겨진 파일 입력 -->
  <input id="chat-image-upload" type="file" accept="image/*,video/*" class="hidden">
  {% endif %} 
</div>