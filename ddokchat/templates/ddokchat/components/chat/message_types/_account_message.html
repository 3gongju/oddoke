<!-- ddokchat/templates/ddokchat/components/chat/message_types/account_message.html -->

{% with account_info=message.account_content.get_display_info %}
<div class="{% if is_my_message %}bg-gray-900 text-white{% else %}bg-white text-gray-800 border border-gray-200{% endif %} px-4 py-3 rounded-2xl shadow-sm">
  <div class="space-y-3">
    <div class="flex items-center space-x-2 mb-2">
      <span class="text-lg">💳</span>
      <span class="font-semibold">{% if is_my_message %}계좌정보 전송{% else %}계좌정보{% endif %}</span>
    </div>
    
    {% if account_info.is_deleted %}
      <!-- 삭제된 계좌 정보 -->
      <div class="{% if is_my_message %}bg-gray-800{% else %}bg-gray-100{% endif %} rounded-lg p-4 text-center">
        <p class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %} font-medium">{{ account_info.deleted_message }}</p>
      </div>
    {% else %}
      <!-- 기존 계좌 정보 표시 -->
      <div class="{% if is_my_message %}bg-gray-800{% else %}bg-gray-50{% endif %} rounded-lg p-3 space-y-2">
        <div class="flex justify-between">
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">은행</span>
          <span class="font-medium">{{ account_info.bank_name }}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">계좌번호</span>
          <span class="font-mono">{{ account_info.account_number }}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">예금주</span>
          <span class="font-medium">{{ account_info.account_holder }}</span>
        </div>
      </div>
      
      <!-- 상대방 메시지에만 버튼 표시 -->
      {% if not is_my_message %}
      <div class="flex space-x-2 mt-3">
        <button onclick="copyAccountNumber('{{ account_info.account_number }}')" 
                class="flex-1 bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-2 rounded-lg transition-colors">
          계좌번호 복사
        </button>
        <button onclick="checkFraudHistory('{{ account_info.bank_code }}', '{{ account_info.account_number }}', '{{ account_info.account_holder }}')" 
                class="flex-1 bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-2 rounded-lg transition-colors">
          신고이력 조회
        </button>
      </div>
      {% endif %}
    {% endif %}
  </div>
</div>
{% endwith %}