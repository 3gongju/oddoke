<!-- ddokchat/templates/ddokchat/components/chat/message_types/account_message.html -->

{% with account_info=message.account_content.get_display_info %}
<div class="{% if is_my_message %}bg-gray-900 text-white{% else %}bg-white text-gray-800 border border-gray-200{% endif %} px-4 py-3 rounded-2xl shadow-sm">
  <div class="space-y-3">
    <div class="flex items-center space-x-2 mb-2">
      <span class="text-lg">ğŸ’³</span>
      <span class="font-semibold">{% if is_my_message %}ê³„ì¢Œì •ë³´ ì „ì†¡{% else %}ê³„ì¢Œì •ë³´{% endif %}</span>
    </div>
    
    {% if account_info.is_deleted %}
      <!-- ì‚­ì œëœ ê³„ì¢Œ ì •ë³´ -->
      <div class="{% if is_my_message %}bg-gray-800{% else %}bg-gray-100{% endif %} rounded-lg p-4 text-center">
        <p class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %} font-medium">{{ account_info.deleted_message }}</p>
      </div>
    {% else %}
      <!-- ê¸°ì¡´ ê³„ì¢Œ ì •ë³´ í‘œì‹œ -->
      <div class="{% if is_my_message %}bg-gray-800{% else %}bg-gray-50{% endif %} rounded-lg p-3 space-y-2">
        <div class="flex justify-between">
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">ì€í–‰</span>
          <span class="font-medium">{{ account_info.bank_name }}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">ê³„ì¢Œë²ˆí˜¸</span>
          <span class="font-mono">{{ account_info.account_number }}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">ì˜ˆê¸ˆì£¼</span>
          <span class="font-medium">{{ account_info.account_holder }}</span>
        </div>
      </div>
      
      <!-- ìƒëŒ€ë°© ë©”ì‹œì§€ì—ë§Œ ë²„íŠ¼ í‘œì‹œ -->
      {% if not is_my_message %}
      <div class="flex space-x-2 mt-3">
        <button onclick="copyAccountNumber('{{ account_info.account_number }}')" 
                class="flex-1 bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-2 rounded-lg transition-colors">
          ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬
        </button>
        <button onclick="checkFraudHistory('{{ account_info.bank_code }}', '{{ account_info.account_number }}', '{{ account_info.account_holder }}')" 
                class="flex-1 bg-red-500 hover:bg-red-600 text-white text-xs px-3 py-2 rounded-lg transition-colors">
          ì‹ ê³ ì´ë ¥ ì¡°íšŒ
        </button>
      </div>
      {% endif %}
    {% endif %}
  </div>
</div>
{% endwith %}