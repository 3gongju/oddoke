<!-- ddokchat/templates/ddokchat/components/chat/message_types/address_message.html -->

{% with address_info=message.address_content.get_display_info %}
<div class="{% if is_my_message %}bg-gray-900 text-white{% else %}bg-white text-gray-800 border border-gray-200{% endif %} px-4 py-3 rounded-2xl shadow-sm">
  <div class="space-y-3">
    <div class="flex items-center space-x-2 mb-2">
      <span class="text-lg">📍</span>
      <span class="font-semibold">{% if is_my_message %}주소정보 전송{% else %}배송 주소{% endif %}</span>
    </div>
    
    {% if address_info.is_deleted %}
      <!-- 삭제된 주소 정보 -->
      <div class="{% if is_my_message %}bg-gray-800{% else %}bg-gray-100{% endif %} rounded-lg p-4 text-center">
        <p class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %} font-medium">{{ address_info.deleted_message }}</p>
      </div>
    {% else %}
      <!-- 기존 주소 정보 표시 -->
      <div class="{% if is_my_message %}bg-gray-800{% else %}bg-gray-50{% endif %} rounded-lg p-3 space-y-2">
        <div class="flex justify-between">
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">우편번호</span>
          <span class="font-medium">{{ address_info.postal_code }}</span>
        </div>
        <div>
          <span class="text-sm {% if is_my_message %}text-gray-300{% else %}text-gray-600{% endif %}">주소</span>
          <p class="font-medium mt-1">{{ address_info.full_address }}</p>
        </div>
      </div>
      
      <!-- 주소 복사 버튼 (상대방 메시지에만) -->
      {% if not is_my_message %}
      <div class="mt-3">
        <button onclick="copyAddress('{{ address_info.full_address }}')" 
                class="w-full bg-green-500 hover:bg-green-600 text-white text-xs px-3 py-2 rounded-lg transition-colors">
          주소 복사
        </button>
      </div>
      {% endif %}
    {% endif %}
  </div>
</div>
{% endwith %}