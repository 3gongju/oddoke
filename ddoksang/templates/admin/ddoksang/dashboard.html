<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë•ìƒ ë§¤ë‹ˆì ˆrrrrr</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="{% url 'ddoksang:admin_dashboard' %}" class="text-xl font-semibold text-gray-900">ğŸ› ï¸ ë•ìƒ ë§¤ë‹ˆì ˆ</a>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600">{{ user.username }}ë‹˜</span>
                    <a href="{% url 'ddoksang:home' %}" class="text-blue-600 hover:text-blue-800">ë•ìƒ ë©”ì¸í˜ì´ì§€ë¡œ ëŒì•„ê°€ìš”</a>
                    <a href="{% url 'ddoksang:admin_cafe_list' %}" class="text-blue-600 hover:text-blue-800">ì „ì²´ ë“±ë¡ëœ ìƒì¹´ ëª©ë¡</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- í˜ì´ì§€ ì œëª© -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900">ğŸ“Š ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
            <p class="mt-2 text-gray-600">ë•ìƒ ë“±ë¡ í˜„í™© í™•ì¸ ë° ê´€ë¦¬</p>
        </div>

        <!-- í†µê³„ ì¹´ë“œë“¤ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
            <!-- ìŠ¹ì¸ ëŒ€ê¸° -->
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-lg">â³</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">ìŠ¹ì¸ ëŒ€ê¸°</dt>
                                <dd class="text-lg font-medium text-gray-900">{{ stats.pending }}</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ìŠ¹ì¸ë¨ -->
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-green-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-lg">âœ…</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">ìŠ¹ì¸ë¨</dt>
                                <dd class="text-lg font-medium text-gray-900">{{ stats.approved }}</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê±°ì ˆë¨ -->
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-red-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-lg">âŒ</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">ê±°ì ˆë¨</dt>
                                <dd class="text-lg font-medium text-gray-900">{{ stats.rejected }}</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì´ ë“±ë¡ -->
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-lg">ğŸ“Š</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">ì´ ë“±ë¡</dt>
                                <dd class="text-lg font-medium text-gray-900">{{ stats.total }}</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì´ë²ˆ ë‹¬ -->
            <div class="bg-white overflow-hidden shadow rounded-lg">
                <div class="p-5">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center">
                                <span class="text-white text-lg">ğŸ“…</span>
                            </div>
                        </div>
                        <div class="ml-5 w-0 flex-1">
                            <dl>
                                <dt class="text-sm font-medium text-gray-500 truncate">ì´ë²ˆ ë‹¬</dt>
                                <dd class="text-lg font-medium text-gray-900">{{ stats.this_month }}</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ì¹´í˜ë“¤ -->
        {% if pending_cafes %}
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-900">â³ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ ({{ pending_cafes.count }}ê°œ)</h2>
                <a href="{% url 'ddoksang:admin_cafe_list' %}?status=pending" 
                   class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    ì „ì²´ ë³´ê¸° â†’
                </a>
            </div>
            
            <!-- ìŠ¹ì¸ ëŒ€ê¸° ì¹´í˜ í…Œì´ë¸” -->
            {% include 'admin/ddoksang/cafe_table.html' with cafes=pending_cafes show_empty_message="ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ìƒì¹´ê°€ ì—†ìŠµë‹ˆë‹¤." %}
        </div>
        {% endif %}

        <!-- ìµœê·¼ ë“±ë¡ëœ ì¹´í˜ë“¤ -->
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-900">ğŸ“‹ ìµœê·¼ ë“±ë¡ ëª©ë¡</h2>
                <a href="{% url 'ddoksang:admin_cafe_list' %}" 
                   class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    ì „ì²´ ë³´ê¸° â†’
                </a>
            </div>
            
            <!-- ìµœê·¼ ì¹´í˜ í…Œì´ë¸” -->
            {% include 'admin/ddoksang/cafe_table.html' with cafes=recent_cafes show_empty_message="ë“±ë¡ëœ ìƒì¹´ê°€ ì—†ìŠµë‹ˆë‹¤." %}
        </div>

        <!-- ê±°ì ˆëœ ì¹´í˜ë“¤ (ì„ íƒì‚¬í•­) -->
        {% if rejected_cafes %}
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-900">âŒ ìµœê·¼ ê±°ì ˆëœ ìƒì¹´ë“¤</h2>
                <a href="{% url 'ddoksang:admin_cafe_list' %}?status=rejected" 
                   class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    ì „ì²´ ë³´ê¸° â†’
                </a>
            </div>
            
            <!-- ê±°ì ˆëœ ì¹´í˜ í…Œì´ë¸” -->
            {% include 'admin/ddoksang/cafe_table.html' with cafes=rejected_cafes show_empty_message="ê±°ì ˆëœ ìƒì¹´ê°€ ì—†ìŠµë‹ˆë‹¤." %}
        </div>
        {% endif %}

        <!-- ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
        <div class="bg-white shadow rounded-lg p-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">ğŸš€ ë¹ ë¥¸ ì•¡ì…˜</h3>
            <div class="flex flex-wrap gap-4">
                <a href="{% url 'ddoksang:admin_cafe_list' %}?status=pending" 
                   class="inline-flex items-center px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-md hover:bg-yellow-700">
                    â³ ìŠ¹ì¸ ëŒ€ê¸° ê´€ë¦¬
                </a>
                <a href="{% url 'ddoksang:admin_cafe_list' %}" 
                   class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700">
                    ğŸ“‹ ì „ì²´ ìƒì¹´ ê´€ë¦¬
                </a>
                <a href="{% url 'ddoksang:home' %}" 
                   class="inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700">
                    ğŸ  ì‚¬ìš©ì í˜ì´ì§€
                </a>
            </div>
        </div>
    </div>

    <!-- ìë™ ìƒˆë¡œê³ ì¹¨ ìŠ¤í¬ë¦½íŠ¸ (ì„ íƒì‚¬í•­) -->
    <script>
        // ë” ì•ˆì „í•œ ë°©ë²•
        const pendingCount = parseInt('{{ stats.pending|default:"0" }}');
        if (pendingCount > 0) {
            setTimeout(function() {
                location.reload();
            }, 5 * 60 * 1000); // 5ë¶„
        }
    </script>
</body>
</html>