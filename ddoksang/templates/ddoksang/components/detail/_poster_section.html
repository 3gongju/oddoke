<!-- ddoksang/templates/ddoksang/components/detail/_poster_section.html -->
<!-- Îã®ÏàúÌïú Ìè¨Ïä§ÌÑ∞ Ïù¥ÎØ∏ÏßÄ ÌëúÏãú - ÌôïÎåÄ Í∏∞Îä• ÏóÜÏùå -->

{% with all_images=cafe.get_all_images %}
  {% if all_images %}
    <div class="bg-white rounded-2xl shadow-sm border p-6">
      <h2 class="text-xl font-bold text-gray-900 mb-6 flex items-center">
        <span class="mr-2">üñºÔ∏è</span> Ìè¨Ïä§ÌÑ∞ & Ïù¥ÎØ∏ÏßÄ
        <span class="ml-auto text-sm text-gray-500 font-normal">{{ all_images|length }}Ïû•</span>
      </h2>
      
      {% if all_images|length == 1 %}
        <!-- 1Í∞ú Ïù¥ÎØ∏ÏßÄ: Ï§ëÏïôÏóê ÌÅ∞ Ìè¨Ïä§ÌÑ∞ -->
        {% with image=all_images.0 %}
          <div class="flex justify-center">
            <div class="poster-single bg-gray-50 rounded-2xl overflow-hidden shadow-sm max-w-md w-full">
              <!-- Ìè¨Ïä§ÌÑ∞ ÎπÑÏú® ÏôÑÏ†Ñ Ïú†ÏßÄ -->
              <div class="w-full">
                <img src="{{ image.url }}" alt="{{ image.caption|default:cafe.cafe_name }}" 
                     class="w-full h-auto object-contain rounded-2xl">
              </div>
              
              <!-- Í∞ÑÎã®Ìïú Ï†ïÎ≥¥Îßå ÌëúÏãú -->
              {% if image.caption %}
                <div class="p-4 bg-white">
                  <p class="text-sm text-gray-600 text-center">{{ image.caption }}</p>
                </div>
              {% endif %}
            </div>
          </div>
        {% endwith %}
        
      {% elif all_images|length == 2 %}
        <!-- 2Í∞ú Ïù¥ÎØ∏ÏßÄ: ÎÇòÎûÄÌûà Î∞∞Ïπò -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          {% for image in all_images %}
            <div class="poster-dual bg-gray-50 rounded-xl overflow-hidden shadow-sm">
              <div class="w-full">
                <img src="{{ image.url }}" alt="{{ image.caption|default:cafe.cafe_name }}" 
                     class="w-full h-auto object-contain rounded-xl">
              </div>
              
              {% if image.caption %}
                <div class="p-3 bg-white">
                  <p class="text-xs text-gray-600 text-center">{{ image.caption }}</p>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
        
      {% else %}
        <!-- 3Í∞ú Ïù¥ÏÉÅ Ïù¥ÎØ∏ÏßÄ: Î©îÏù∏ 1Í∞ú + ÏûëÏùÄ Ïù¥ÎØ∏ÏßÄÎì§ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Ï≤´ Î≤àÏß∏ Ïù¥ÎØ∏ÏßÄÎ•º Î©îÏù∏ÏúºÎ°ú (2Ïπ∏ Ï∞®ÏßÄ) -->
          {% with main_image=all_images.0 %}
            <div class="lg:col-span-2">
              <div class="poster-main bg-gray-50 rounded-xl overflow-hidden shadow-sm">
                <div class="w-full">
                  <img src="{{ main_image.url }}" alt="{{ main_image.caption|default:cafe.cafe_name }}" 
                       class="w-full h-auto object-contain rounded-xl">
                </div>
                
                {% if main_image.caption %}
                  <div class="p-4 bg-white">
                    <p class="text-sm text-gray-600 text-center">{{ main_image.caption }}</p>
                  </div>
                {% endif %}
              </div>
            </div>
          {% endwith %}
          
          <!-- ÎÇòÎ®∏ÏßÄ Ïù¥ÎØ∏ÏßÄÎì§ (1Ïπ∏ Ï∞®ÏßÄ) -->
          <div class="space-y-4">
            {% for image in all_images %}
              {% if not forloop.first %}
                <div class="poster-sub bg-gray-50 rounded-lg overflow-hidden shadow-sm">
                  <div class="w-full">
                    <img src="{{ image.url }}" alt="{{ image.caption|default:cafe.cafe_name }}" 
                         class="w-full h-48 object-cover rounded-lg">
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
  {% endif %}
{% endwith %}