<!-- ddoksang/templates/ddoksang/components/_javascript_modules.html -->

<!-- ë² ì´ìŠ¤ ìœ í‹¸ë¦¬í‹° ëª¨ë“ˆ -->
<script>
// ì „ì—­ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
window.Ddoksang = window.Ddoksang || {};

// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
Ddoksang.Utils = {
    // CSRF í† í° ê°€ì ¸ì˜¤ê¸°
    getCsrfToken: () => {
        return document.querySelector('[name=csrfmiddlewaretoken]')?.value || 
               document.querySelector('meta[name=csrf-token]')?.getAttribute('content');
    },
    
    // API ìš”ì²­ ë˜í¼
    async apiRequest(url, options = {}) {
        const defaultOptions = {
            headers: {
                'X-CSRFToken': this.getCsrfToken(),
                'X-Requested-With': 'XMLHttpRequest',
                'Content-Type': 'application/json',
            },
            credentials: 'same-origin',
        };
        
        const config = { ...defaultOptions, ...options };
        
        if (config.body && typeof config.body === 'object') {
            config.body = JSON.stringify(config.body);
        }
        
        try {
            const response = await fetch(url, config);
            const data = await response.json();
            
            if (!response.ok) {
                throw new Error(data.error || 'ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
            
            return data;
        } catch (error) {
            console.error('API ìš”ì²­ ì˜¤ë¥˜:', error);
            throw error;
        }
    },
    
    // í† ìŠ¤íŠ¸ ì•Œë¦¼
    showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg text-white transform transition-all duration-300 translate-x-full`;
        
        const bgColors = {
            success: 'bg-green-500',
            error: 'bg-red-500',
            warning: 'bg-yellow-500',
            info: 'bg-blue-500'
        };
        
        toast.classList.add(bgColors[type] || bgColors.info);
        toast.textContent = message;
        
        document.body.appendChild(toast);
        
        // ì• ë‹ˆë©”ì´ì…˜
        setTimeout(() => toast.classList.remove('translate-x-full'), 100);
        
        // ìë™ ì œê±°
        setTimeout(() => {
            toast.classList.add('translate-x-full');
            setTimeout(() => document.body.removeChild(toast), 300);
        }, 3000);
    },
    
    // ë¡œë”© ìŠ¤í”¼ë„ˆ
    showLoading(element) {
        if (!element) return;
        
        const originalContent = element.innerHTML;
        element.innerHTML = `
            <div class="flex items-center justify-center">
                <svg class="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.25"></circle>
                    <path fill="currentColor" opacity="0.75" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                ì²˜ë¦¬ ì¤‘...
            </div>
        `;
        element.disabled = true;
        
        return () => {
            element.innerHTML = originalContent;
            element.disabled = false;
        };
    },
    
    // ë””ë°”ìš´ìŠ¤
    debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => {
                clearTimeout(timeout);
                func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    },
    
    // ì´ë¯¸ì§€ ë¡œë“œ ì²´í¬
    async loadImage(src) {
        return new Promise((resolve, reject) => {
            const img = new Image();
            img.onload = () => resolve(img);
            img.onerror = reject;
            img.src = src;
        });
    },
    
    // íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
    formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    },
    
    // ë‚ ì§œ í¬ë§·íŒ…
    formatDate(date, format = 'YYYY-MM-DD') {
        const d = new Date(date);
        const year = d.getFullYear();
        const month = String(d.getMonth() + 1).padStart(2, '0');
        const day = String(d.getDate()).padStart(2, '0');
        const hours = String(d.getHours()).padStart(2, '0');
        const minutes = String(d.getMinutes()).padStart(2, '0');
        
        return format
            .replace('YYYY', year)
            .replace('MM', month)
            .replace('DD', day)
            .replace('HH', hours)
            .replace('mm', minutes);
    },
    
    // ì¿ í‚¤ ê´€ë¦¬
    setCookie(name, value, days = 7) {
        const expires = new Date();
        expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
        document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
    },
    
    getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }
};

// ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
Ddoksang.EventEmitter = class {
    constructor() {
        this.events = {};
    }
    
    on(event, callback) {
        if (!this.events[event]) {
            this.events[event] = [];
        }
        this.events[event].push(callback);
    }
    
    emit(event, data) {
        if (this.events[event]) {
            this.events[event].forEach(callback => callback(data));
        }
    }
    
    off(event, callback) {
        if (this.events[event]) {
            this.events[event] = this.events[event].filter(cb => cb !== callback);
        }
    }
};

// ê¸€ë¡œë²Œ ì´ë²¤íŠ¸ ì—ë¯¸í„°
Ddoksang.events = new Ddoksang.EventEmitter();
</script>


<!-- ì¹´ì¹´ì˜¤ë§µ ëª¨ë“ˆ -->
<script>
Ddoksang.KakaoMap = class {
    constructor(containerId, options = {}) {
        this.container = document.getElementById(containerId);
        this.options = {
            center: new kakao.maps.LatLng(37.5665, 126.9780),
            level: 3,
            ...options
        };
        
        this.map = null;
        this.markers = [];
        this.infoWindows = [];
        this.currentInfoWindow = null;
        
        this.init();
    }
    
    init() {
        if (!this.container || !window.kakao) {
            console.error('ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” ì‹¤íŒ¨: ì»¨í…Œì´ë„ˆ ë˜ëŠ” kakao ê°ì²´ê°€ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }
        
        this.map = new kakao.maps.Map(this.container, this.options);
        this.placesService = new kakao.maps.services.Places();
        this.geocoder = new kakao.maps.services.Geocoder();
        
        // ì»¨íŠ¸ë¡¤ ì¶”ê°€
        this.addControls();
        
        // ë§µ í´ë¦­ ì´ë²¤íŠ¸
        kakao.maps.event.addListener(this.map, 'click', () => {
            this.closeInfoWindow();
        });
    }
    
    // ì§€ë„ ì»¨íŠ¸ë¡¤ ì¶”ê°€
    addControls() {
        // í™•ëŒ€/ì¶•ì†Œ ì»¨íŠ¸ë¡¤
        const zoomControl = new kakao.maps.ZoomControl();
        this.map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
        
        // ì§€ë„ íƒ€ì… ì»¨íŠ¸ë¡¤
        const mapTypeControl = new kakao.maps.MapTypeControl();
        this.map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);
    }
    
    // ì •ë³´ì°½ ë‹«ê¸°
    closeInfoWindow() {
        if (this.currentInfoWindow) {
            this.currentInfoWindow.close();
            this.currentInfoWindow = null;
        }
    }
    
    // ë§ˆì»¤ ì¶”ê°€
    addMarker(position, options = {}) {
        const marker = new kakao.maps.Marker({
            position: position,
            map: this.map,
            ...options
        });
        
        this.markers.push(marker);
        return marker;
    }
    
    // ìƒì¼ì¹´í˜ ë§ˆì»¤ ì¶”ê°€ (ì „ìš©)
    addCafeMarker(cafeData) {
        const position = new kakao.maps.LatLng(cafeData.latitude, cafeData.longitude);
        
        // ì»¤ìŠ¤í…€ ë§ˆì»¤ ì´ë¯¸ì§€ (ì„ íƒì‚¬í•­)
        const imageSrc = '/static/images/cafe-marker.png';
        const imageSize = new kakao.maps.Size(40, 42);
        const markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);
        
        const marker = new kakao.maps.Marker({
            position: position,
            map: this.map,
            image: markerImage
        });
        
        // ì •ë³´ì°½ ë‚´ìš© ìƒì„±
        const infoContent = this.createCafeInfoContent(cafeData);
        const infoWindow = new kakao.maps.InfoWindow({
            content: infoContent,
            removable: true
        });
        
        // ë§ˆì»¤ í´ë¦­ ì´ë²¤íŠ¸
        kakao.maps.event.addListener(marker, 'click', () => {
            this.closeInfoWindow();
            infoWindow.open(this.map, marker);
            this.currentInfoWindow = infoWindow;
        });
        
        // ë§ˆì»¤ í˜¸ë²„ ì´ë²¤íŠ¸
        kakao.maps.event.addListener(marker, 'mouseover', () => {
            if (this.currentInfoWindow !== infoWindow) {
                const simpleInfo = new kakao.maps.InfoWindow({
                    content: `<div style="padding:5px;font-size:12px;">${cafeData.name}</div>`
                });
                simpleInfo.open(this.map, marker);
                setTimeout(() => simpleInfo.close(), 2000);
            }
        });
        
        this.markers.push(marker);
        this.infoWindows.push(infoWindow);
        
        return { marker, infoWindow };
    }
    
    // ìƒì¼ì¹´í˜ ì •ë³´ì°½ ë‚´ìš© ìƒì„±
    createCafeInfoContent(cafeData) {
        const statusBadge = cafeData.is_active ? 
            '<span style="background:#10b981;color:white;padding:2px 6px;border-radius:12px;font-size:10px;">ì§„í–‰ì¤‘</span>' :
            '<span style="background:#ef4444;color:white;padding:2px 6px;border-radius:12px;font-size:10px;">ì¢…ë£Œ</span>';
            
        return `
            <div style="padding:15px;min-width:250px;font-family:'Pretendard',sans-serif;">
                <div style="margin-bottom:8px;">
                    <h4 style="margin:0;font-size:16px;font-weight:600;color:#1f2937;">${cafeData.name}</h4>
                    ${statusBadge}
                </div>
                <div style="margin-bottom:6px;color:#6b7280;font-size:13px;">
                    ğŸ­ ${cafeData.artist}${cafeData.member ? ` - ${cafeData.member}` : ''}
                </div>
                <div style="margin-bottom:6px;color:#6b7280;font-size:13px;">
                    ğŸ“… ${cafeData.start_date} ~ ${cafeData.end_date}
                </div>
                <div style="margin-bottom:10px;color:#6b7280;font-size:12px;">
                    ğŸ“ ${cafeData.address}
                </div>
                ${cafeData.main_image ? `<img src="${cafeData.main_image}" style="width:100%;height:120px;object-fit:cover;border-radius:6px;margin-bottom:8px;" alt="${cafeData.name}">` : ''}
                <div style="text-align:center;">
                    <a href="/ddoksang/detail/${cafeData.id}/" 
                       style="display:inline-block;background:#3b82f6;color:white;padding:6px 12px;border-radius:6px;text-decoration:none;font-size:12px;">
                        ìì„¸íˆ ë³´ê¸°
                    </a>
                </div>
            </div>
        `;
    }
    
    // ì¥ì†Œ ê²€ìƒ‰
    searchPlaces(keyword, callback) {
        if (!keyword.trim()) return;
        
        this.placesService.keywordSearch(keyword, (data, status) => {
            if (status === kakao.maps.services.Status.OK) {
                callback(data);
            } else {
                console.error('ì¥ì†Œ ê²€ìƒ‰ ì‹¤íŒ¨:', status);
                callback([]);
            }
        });
    }
    
    // ì£¼ì†Œë¡œ ì¢Œí‘œ ê²€ìƒ‰
    geocodeAddress(address, callback) {
        this.geocoder.addressSearch(address, (result, status) => {
            if (status === kakao.maps.services.Status.OK) {
                const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                callback(coords, result[0]);
            } else {
                console.error('ì£¼ì†Œ ê²€ìƒ‰ ì‹¤íŒ¨:', status);
                callback(null);
            }
        });
    }
    
    // ì¢Œí‘œë¡œ ì£¼ì†Œ ê²€ìƒ‰
    geocodeCoord(lat, lng, callback) {
        this.geocoder.coord2Address(lng, lat, (result, status) => {
            if (status === kakao.maps.services.Status.OK) {
                callback(result[0]);
            } else {
                console.error('ì¢Œí‘œ ë³€í™˜ ì‹¤íŒ¨:', status);
                callback(null);
            }
        });
    }
    
    // ì§€ë„ ì¤‘ì‹¬ ì´ë™
    panTo(lat, lng) {
        const moveLatLon = new kakao.maps.LatLng(lat, lng);
        this.map.panTo(moveLatLon);
    }
    
    // ì§€ë„ ë ˆë²¨ ì„¤ì •
    setLevel(level) {
        this.map.setLevel(level);
    }
    
    // ëª¨ë“  ë§ˆì»¤ ì œê±°
    clearMarkers() {
        this.markers.forEach(marker => marker.setMap(null));
        this.markers = [];
        this.infoWindows.forEach(infoWindow => infoWindow.close());
        this.infoWindows = [];
        this.currentInfoWindow = null;
    }
    
    // ë§ˆì»¤ë“¤ì´ ëª¨ë‘ ë³´ì´ë„ë¡ ì§€ë„ ë²”ìœ„ ì¡°ì •
    setBounds(markers = null) {
        const bounds = new kakao.maps.LatLngBounds();
        const targetMarkers = markers || this.markers;
        
        targetMarkers.forEach(marker => {
            bounds.extend(marker.getPosition());
        });
        
        this.map.setBounds(bounds);
    }
    
    // í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
    getCurrentLocation(callback) {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const coords = new kakao.maps.LatLng(lat, lng);
                    callback(coords);
                },
                (error) => {
                    console.error('ìœ„ì¹˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
                    callback(null);
                }
            );
        } else {
            console.error('Geolocationì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            callback(null);
        }
    }
    
    // ê±°ë¦¬ ê³„ì‚° (ë‘ ì¢Œí‘œ ê°„)
    calculateDistance(lat1, lng1, lat2, lng2) {
        const R = 6371; // ì§€êµ¬ ë°˜ì§€ë¦„ (km)
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLng = (lng2 - lng1) * Math.PI / 180;
        const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLng/2) * Math.sin(dLng/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        return R * c;
    }
};
</script>

<!-- ì´ë¯¸ì§€ ì—…loader ëª¨ë“ˆ -->
<script>
Ddoksang.ImageUploader = class {
    constructor(containerSelector, options = {}) {
        this.container = document.querySelector(containerSelector);
        this.options = {
            maxFiles: 5,
            maxFileSize: 5 * 1024 * 1024, // 5MB
            allowedTypes: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'],
            ...options
        };
        
        this.files = [];
        this.previewContainer = null;
        
        this.init();
    }
    
    init() {
        if (!this.container) return;
        
        this.createUploadInterface();
        this.bindEvents();
    }
    
    createUploadInterface() {
        this.container.innerHTML = `
            <div class="image-upload-wrapper">
                <div class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors cursor-pointer">
                    <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <div class="mt-4">
                        <label class="cursor-pointer">
                            <span class="mt-2 block text-sm font-medium text-gray-900">
                                í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë˜ëŠ” ë“œë˜ê·¸ & ë“œë¡­
                            </span>
                            <input type="file" class="sr-only" multiple accept="image/*" id="file-input">
                        </label>
                        <p class="mt-1 text-xs text-gray-500">
                            PNG, JPG, GIF ìµœëŒ€ ${this.options.maxFiles}ê°œ (íŒŒì¼ë‹¹ ${this.formatFileSize(this.options.maxFileSize)})
                        </p>
                    </div>
                </div>
                <div class="image-preview-container mt-4 grid grid-cols-2 md:grid-cols-3 gap-4"></div>
            </div>
        `;
        
        this.uploadArea = this.container.querySelector('.upload-area');
        this.fileInput = this.container.querySelector('#file-input');
        this.previewContainer = this.container.querySelector('.image-preview-container');
    }
    
    bindEvents() {
        // íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸
        this.fileInput.addEventListener('change', (e) => {
            this.handleFiles(Array.from(e.target.files));
        });
        
        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸
        this.uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            this.uploadArea.classList.add('border-blue-400', 'bg-blue-50');
        });
        
        this.uploadArea.addEventListener('dragleave', (e) => {
            e.preventDefault();
            this.uploadArea.classList.remove('border-blue-400', 'bg-blue-50');
        });
        
        this.uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            this.uploadArea.classList.remove('border-blue-400', 'bg-blue-50');
            const files = Array.from(e.dataTransfer.files).filter(file => file.type.startsWith('image/'));
            this.handleFiles(files);
        });
    }
    
    handleFiles(newFiles) {
        // íŒŒì¼ ìˆ˜ ì œí•œ ì²´í¬
        if (this.files.length + newFiles.length > this.options.maxFiles) {
            Ddoksang.Utils.showToast(`ìµœëŒ€ ${this.options.maxFiles}ê°œê¹Œì§€ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`, 'warning');
            return;
        }
        
        newFiles.forEach(file => {
            // íŒŒì¼ íƒ€ì… ì²´í¬
            if (!this.options.allowedTypes.includes(file.type)) {
                Ddoksang.Utils.showToast(`ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤: ${file.name}`, 'error');
                return;
            }
            
            // íŒŒì¼ í¬ê¸° ì²´í¬
            if (file.size > this.options.maxFileSize) {
                Ddoksang.Utils.showToast(`íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤: ${file.name}`, 'error');
                return;
            }
            
            this.addFile(file);
        });
        
        this.updatePreview();
    }
    
    addFile(file) {
        const fileData = {
            file: file,
            id: Date.now() + Math.random(),
            name: file.name,
            size: file.size,
            preview: null
        };
        
        this.files.push(fileData);
        
        // ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ìƒì„±
        const reader = new FileReader();
        reader.onload = (e) => {
            fileData.preview = e.target.result;
            this.updatePreview();
        };
        reader.readAsDataURL(file);
    }
    
    removeFile(fileId) {
        this.files = this.files.filter(f => f.id !== fileId);
        this.updatePreview();
        Ddoksang.events.emit('filesChanged', this.files);
    }
    
    updatePreview() {
        this.previewContainer.innerHTML = '';
        
        this.files.forEach(fileData => {
            if (fileData.preview) {
                const previewElement = this.createPreviewElement(fileData);
                this.previewContainer.appendChild(previewElement);
            }
        });
        
        // íŒŒì¼ì´ ìˆìœ¼ë©´ ì—…ë¡œë“œ ì˜ì—­ ì¶•ì†Œ
        if (this.files.length > 0) {
            this.uploadArea.classList.add('compact');
        } else {
            this.uploadArea.classList.remove('compact');
        }
        
        Ddoksang.events.emit('filesChanged', this.files);
    }
    
    createPreviewElement(fileData) {
        const div = document.createElement('div');
        div.className = 'relative group';
        div.innerHTML = `
            <img src="${fileData.preview}" 
                 alt="${fileData.name}" 
                 class="w-full h-32 object-cover rounded-lg border border-gray-200">
            <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                <button type="button" 
                        class="remove-btn bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors"
                        data-file-id="${fileData.id}">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-2 rounded-b-lg">
                <p class="text-xs truncate">${fileData.name}</p>
                <p class="text-xs text-gray-300">${this.formatFileSize(fileData.size)}</p>
            </div>
        `;
        
        // ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
        div.querySelector('.remove-btn').addEventListener('click', () => {
            this.removeFile(fileData.id);
        });
        
        return div;
    }
    
    formatFileSize(bytes) {
        return Ddoksang.Utils.formatFileSize(bytes);
    }
    
    getFiles() {
        return this.files.map(f => f.file);
    }
    
    clear() {
        this.files = [];
        this.updatePreview();
    }
};
</script>

<!-- ë‹¤ë‹¨ê³„ í¼ ëª¨ë“ˆ -->
<script>
Ddoksang.MultiStepForm = class {
    constructor(formSelector, options = {}) {
        this.form = document.querySelector(formSelector);
        this.options = {
            showProgress: true,
            validateOnNext: true,
            ...options
        };
        
        this.currentStep = 0;
        this.steps = [];
        this.totalSteps = 0;
        
        this.init();
    }
    
    init() {
        if (!this.form) return;
        
        this.steps = Array.from(this.form.querySelectorAll('.step'));
        this.totalSteps = this.steps.length;
        
        if (this.totalSteps === 0) return;
        
        this.createNavigation();
        this.createProgressBar();
        this.bindEvents();
        this.showStep(0);
    }
    
    createNavigation() {
        const nav = document.createElement('div');
        nav.className = 'form-navigation flex justify-between mt-6';
        nav.innerHTML = `
            <button type="button" id="prevBtn" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                ì´ì „
            </button>
            <button type="button" id="nextBtn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">
                ë‹¤ìŒ
            </button>
        `;
        
        this.form.appendChild(nav);
        
        this.prevBtn = this.form.querySelector('#prevBtn');
        this.nextBtn = this.form.querySelector('#nextBtn');
    }
    
    createProgressBar() {
        if (!this.options.showProgress) return;
        
        const progress = document.createElement('div');
        progress.className = 'form-progress mb-6';
        progress.innerHTML = `
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700">ë‹¨ê³„ <span id="current-step">1</span> / ${this.totalSteps}</span>
                <span class="text-sm text-gray-500"><span id="progress-percent">0</span>%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
        `;
        
        this.form.insertBefore(progress, this.form.firstChild);
        
        this.progressBar = this.form.querySelector('#progress-bar');
        this.currentStepSpan = this.form.querySelector('#current-step');
        this.progressPercent = this.form.querySelector('#progress-percent');
    }
    
    bindEvents() {
        this.prevBtn.addEventListener('click', () => this.previousStep());
        this.nextBtn.addEventListener('click', () => this.nextStep());
        
        // í¼ ì œì¶œ ì´ë²¤íŠ¸
        this.form.addEventListener('submit', (e) => {
            if (this.currentStep < this.totalSteps - 1) {
                e.preventDefault();
                this.nextStep();
            }
        });
    }
    
    showStep(stepIndex) {
        // ëª¨ë“  ìŠ¤í… ìˆ¨ê¸°ê¸°
        this.steps.forEach((step, index) => {
            if (index === stepIndex) {
                step.classList.remove('hidden');
            } else {
                step.classList.add('hidden');
            }
        });
        
        this.currentStep = stepIndex;
        this.updateNavigation();
        this.updateProgress();
        
        // ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ ë°œìƒ
        Ddoksang.events.emit('stepChanged', {
            current: this.currentStep,
            total: this.totalSteps,
            step: this.steps[this.currentStep]
        });
    }
    
    updateNavigation() {
        // ì´ì „ ë²„íŠ¼
        this.prevBtn.disabled = this.currentStep === 0;
        
        // ë‹¤ìŒ/ì œì¶œ ë²„íŠ¼
        if (this.currentStep === this.totalSteps - 1) {
            this.nextBtn.textContent = 'ì œì¶œ';
            this.nextBtn.type = 'submit';
            this.nextBtn.classList.remove('bg-blue-500', 'hover:bg-blue-600');
            this.nextBtn.classList.add('bg-green-500', 'hover:bg-green-600');
        } else {
            this.nextBtn.textContent = 'ë‹¤ìŒ';
            this.nextBtn.type = 'button';
            this.nextBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
            this.nextBtn.classList.add('bg-blue-500', 'hover:bg-blue-600');
        }
    }
    
    updateProgress() {
        if (!this.options.showProgress) return;
        
        const progress = Math.round((this.currentStep / (this.totalSteps - 1)) * 100);
        
        this.currentStepSpan.textContent = this.currentStep + 1;
        this.progressPercent.textContent = progress;
        this.progressBar.style.width = `${progress}%`;
    }
    
    nextStep() {
        if (this.currentStep >= this.totalSteps - 1) return;
        
        // ìœ íš¨ì„± ê²€ì‚¬
        if (this.options.validateOnNext && !this.validateCurrentStep()) {
            return;
        }
        
        this.showStep(this.currentStep + 1);
    }
    
    previousStep() {
        if (this.currentStep <= 0) return;
        this.showStep(this.currentStep - 1);
    }
    
    validateCurrentStep() {
        const currentStepElement = this.steps[this.currentStep];
        const requiredFields = currentStepElement.querySelectorAll('[required]');
        
        let isValid = true;
        
        requiredFields.forEach(field => {
            if (!field.value.trim()) {
                isValid = false;
                field.classList.add('border-red-500');
                
                // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
                let errorMsg = field.nextElementSibling;
                if (!errorMsg || !errorMsg.classList.contains('error-message')) {
                    errorMsg = document.createElement('div');
                    errorMsg.className = 'error-message text-red-500 text-sm mt-1';
                    errorMsg.textContent = 'ì´ í•„ë“œëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.';
                    field.parentNode.insertBefore(errorMsg, field.nextSibling);
                }
            } else {
                field.classList.remove('border-red-500');
                const errorMsg = field.nextElementSibling;
                if (errorMsg && errorMsg.classList.contains('error-message')) {
                    errorMsg.remove();
                }
            }
        });
        
        if (!isValid) {
            Ddoksang.Utils.showToast('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
        }
        
        return isValid;
    }
    
    goToStep(stepIndex) {
        if (stepIndex >= 0 && stepIndex < this.totalSteps) {
            this.showStep(stepIndex);
        }
    }
    
    getCurrentStep() {
        return this.currentStep;
    }
    
    getTotalSteps() {
        return this.totalSteps;
    }
};
</script>

<!-- ì¥ì†Œ ê²€ìƒ‰ ëª¨ë“ˆ -->
<script>
Ddoksang.PlaceSearch = class {
    constructor(inputSelector, mapSelector, options = {}) {
        this.input = document.querySelector(inputSelector);
        this.mapContainer = document.querySelector(mapSelector);
        this.options = {
            defaultLocation: { lat: 37.5665, lng: 126.9780 },
            zoom: 3,
            ...options
        };
        
        this.map = null;
        this.marker = null;
        this.placesService = null;
        this.selectedPlace = null;
        
        this.init();
    }
    
    init() {
        if (!this.input || !this.mapContainer || !window.kakao) {
            console.error('PlaceSearch ì´ˆê¸°í™” ì‹¤íŒ¨: í•„ìˆ˜ ìš”ì†Œê°€ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }
        
        this.initMap();
        this.bindEvents();
    }
    
    initMap() {
        const { lat, lng } = this.options.defaultLocation;
        const center = new kakao.maps.LatLng(lat, lng);
        
        this.map = new kakao.maps.Map(this.mapContainer, {
            center: center,
            level: this.options.zoom
        });
        
        this.placesService = new kakao.maps.services.Places();
        
        // ë§ˆì»¤ ìƒì„±
        this.marker = new kakao.maps.Marker({
            position: center,
            map: this.map
        });
    }
    
    bindEvents() {
        // ì—”í„°í‚¤ ê²€ìƒ‰
        this.input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                this.searchPlace();
            }
        });
        
        // ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸
        kakao.maps.event.addListener(this.map, 'click', (mouseEvent) => {
            const latlng = mouseEvent.latLng;
            this.setMarkerPosition(latlng);
            this.reverseGeocode(latlng.getLat(), latlng.getLng());
        });
    }
    
    searchPlace() {
        const keyword = this.input.value.trim();
        if (!keyword) return;
        
        this.placesService.keywordSearch(keyword, (data, status) => {
            if (status === kakao.maps.services.Status.OK) {
                const place = data[0]; // ì²« ë²ˆì§¸ ê²°ê³¼ ì‚¬ìš©
                const coords = new kakao.maps.LatLng(place.y, place.x);
                
                this.setMarkerPosition(coords);
                this.map.setCenter(coords);
                this.map.setLevel(3);
                
                this.selectedPlace = {
                    id: place.id,
                    name: place.place_name,
                    address: place.address_name,
                    roadAddress: place.road_address_name,
                    phone: place.phone,
                    categoryName: place.category_name,
                    placeUrl: place.place_url,
                    latitude: parseFloat(place.y),
                    longitude: parseFloat(place.x)
                };
                
                this.updateFormFields();
                Ddoksang.events.emit('placeSelected', this.selectedPlace);
                
            } else {
                Ddoksang.Utils.showToast('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.', 'warning');
            }
        });
    }
    
    setMarkerPosition(position) {
        this.marker.setPosition(position);
    }
    
    reverseGeocode(lat, lng) {
        const geocoder = new kakao.maps.services.Geocoder();
        
        geocoder.coord2Address(lng, lat, (result, status) => {
            if (status === kakao.maps.services.Status.OK) {
                const addr = result[0];
                
                this.selectedPlace = {
                    name: '',
                    address: addr.address.address_name,
                    roadAddress: addr.road_address ? addr.road_address.address_name : '',
                    latitude: lat,
                    longitude: lng
                };
                
                this.input.value = this.selectedPlace.address;
                this.updateFormFields();
                Ddoksang.events.emit('placeSelected', this.selectedPlace);
            }
        });
    }
    
    updateFormFields() {
        if (!this.selectedPlace) return;
        
        // ìˆ¨ê²¨ì§„ í•„ë“œë“¤ ì—…ë°ì´íŠ¸
        const fields = {
            'kakao_place_id': this.selectedPlace.id || '',
            'address': this.selectedPlace.address || '',
            'road_address': this.selectedPlace.roadAddress || '',
            'latitude': this.selectedPlace.latitude || '',
            'longitude': this.selectedPlace.longitude || '',
            'phone': this.selectedPlace.phone || '',
            'category_name': this.selectedPlace.categoryName || '',
            'place_url': this.selectedPlace.placeUrl || ''
        };
        
        Object.entries(fields).forEach(([name, value]) => {
            const field = document.querySelector(`input[name="${name}"], select[name="${name}"]`);
            if (field) {
                field.value = value;
            }
        });
    }
    
    getCurrentLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const coords = new kakao.maps.LatLng(lat, lng);
                    
                    this.setMarkerPosition(coords);
                    this.map.setCenter(coords);
                    this.reverseGeocode(lat, lng);
                },
                (error) => {
                    console.error('ìœ„ì¹˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
                    Ddoksang.Utils.showToast('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                }
            );
        }
    }
    
    reset() {
        this.input.value = '';
        this.selectedPlace = null;
        this.setMarkerPosition(new kakao.maps.LatLng(this.options.defaultLocation.lat, this.options.defaultLocation.lng));
        this.map.setCenter(new kakao.maps.LatLng(this.options.defaultLocation.lat, this.options.defaultLocation.lng));
    }
};
</script>

<!-- ëª¨ë‹¬ ê´€ë¦¬ ëª¨ë“ˆ -->
<script>
Ddoksang.Modal = class {
    constructor(modalSelector, options = {}) {
        this.modal = document.querySelector(modalSelector);
        this.options = {
            closeOnOverlay: true,
            closeOnEsc: true,
            showCloseButton: true,
            ...options
        };
        
        this.isOpen = false;
        this.focusableElements = [];
        this.previousFocus = null;
        
        this.init();
    }
    
    init() {
        if (!this.modal) return;
        
        this.createOverlay();
        this.bindEvents();
        
        // í¬ì»¤ìŠ¤ ê°€ëŠ¥í•œ ìš”ì†Œë“¤ ì°¾ê¸°
        this.updateFocusableElements();
    }
    
    createOverlay() {
        if (!this.modal.querySelector('.modal-overlay')) {
            const overlay = document.createElement('div');
            overlay.className = 'modal-overlay fixed inset-0 bg-black bg-opacity-50 z-40';
            this.modal.appendChild(overlay);
        }
    }
    
    bindEvents() {
        // ì˜¤ë²„ë ˆì´ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°
        if (this.options.closeOnOverlay) {
            const overlay = this.modal.querySelector('.modal-overlay');
            if (overlay) {
                overlay.addEventListener('click', () => this.close());
            }
        }
        
        // ESC í‚¤ë¡œ ë‹«ê¸°
        if (this.options.closeOnEsc) {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && this.isOpen) {
                    this.close();
                }
            });
        }
        
        // ë‹«ê¸° ë²„íŠ¼
        const closeButtons = this.modal.querySelectorAll('[data-modal-close]');
        closeButtons.forEach(btn => {
            btn.addEventListener('click', () => this.close());
        });
    }
    
    open() {
        if (this.isOpen) return;
        
        this.previousFocus = document.activeElement;
        this.modal.classList.remove('hidden');
        this.modal.classList.add('flex');
        
        // í¬ì»¤ìŠ¤ ê´€ë¦¬
        this.updateFocusableElements();
        if (this.focusableElements.length > 0) {
            this.focusableElements[0].focus();
        }
        
        // ìŠ¤í¬ë¡¤ ë°©ì§€
        document.body.style.overflow = 'hidden';
        
        this.isOpen = true;
        Ddoksang.events.emit('modalOpened', this);
    }
    
    close() {
        if (!this.isOpen) return;
        
        this.modal.classList.add('hidden');
        this.modal.classList.remove('flex');
        
        // ì´ì „ í¬ì»¤ìŠ¤ ë³µì›
        if (this.previousFocus) {
            this.previousFocus.focus();
        }
        
        // ìŠ¤í¬ë¡¤ ë³µì›
        document.body.style.overflow = '';
        
        this.isOpen = false;
        Ddoksang.events.emit('modalClosed', this);
    }
    
    toggle() {
        if (this.isOpen) {
            this.close();
        } else {
            this.open();
        }
    }
    
    updateFocusableElements() {
        const focusableSelectors = [
            'button:not([disabled])',
            'input:not([disabled])',
            'select:not([disabled])',
            'textarea:not([disabled])',
            'a[href]',
            '[tabindex]:not([tabindex="-1"])'
        ];
        
        this.focusableElements = Array.from(
            this.modal.querySelectorAll(focusableSelectors.join(','))
        );
    }
};
</script>

<!-- í¼ ìœ íš¨ì„± ê²€ì‚¬ ëª¨ë“ˆ -->
<script>
Ddoksang.FormValidator = class {
    constructor(formSelector, rules = {}) {
        this.form = document.querySelector(formSelector);
        this.rules = rules;
        this.errors = {};
        
        this.init();
    }
    
    init() {
        if (!this.form) return;
        
        this.bindEvents();
    }
    
    bindEvents() {
        // ì‹¤ì‹œê°„ ìœ íš¨ì„± ê²€ì‚¬
        this.form.addEventListener('input', (e) => {
            if (this.rules[e.target.name]) {
                this.validateField(e.target);
            }
        });
        
        // í¼ ì œì¶œ ì‹œ ì „ì²´ ê²€ì‚¬
        this.form.addEventListener('submit', (e) => {
            if (!this.validateAll()) {
                e.preventDefault();
            }
        });
    }
    
    validateField(field) {
        const fieldName = field.name;
        const fieldRules = this.rules[fieldName];
        const value = field.value.trim();
        
        if (!fieldRules) return true;
        
        // ê¸°ì¡´ ì—ëŸ¬ ì œê±°
        this.clearFieldError(field);
        
        // ê·œì¹™ ê²€ì‚¬
        for (const rule of fieldRules) {
            if (!this.checkRule(value, rule, field)) {
                this.showFieldError(field, rule.message);
                this.errors[fieldName] = rule.message;
                return false;
            }
        }
        
        delete this.errors[fieldName];
        return true;
    }
    
    checkRule(value, rule, field) {
        switch (rule.type) {
            case 'required':
                return value.length > 0;
                
            case 'minLength':
                return value.length >= rule.value;
                
            case 'maxLength':
                return value.length <= rule.value;
                
            case 'email':
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(value);
                
            case 'phone':
                const phoneRegex = /^[0-9-+\s()]+$/;
                return phoneRegex.test(value);
                
            case 'url':
                try {
                    new URL(value);
                    return true;
                } catch {
                    return false;
                }
                
            case 'date':
                return !isNaN(Date.parse(value));
                
            case 'custom':
                return rule.validator(value, field);
                
            default:
                return true;
        }
    }
    
    showFieldError(field, message) {
        field.classList.add('border-red-500', 'bg-red-50');
        
        const errorElement = document.createElement('div');
        errorElement.className = 'field-error text-red-500 text-sm mt-1';
        errorElement.textContent = message;
        
        field.parentNode.insertBefore(errorElement, field.nextSibling);
    }
    
    clearFieldError(field) {
        field.classList.remove('border-red-500', 'bg-red-50');
        
        const errorElement = field.parentNode.querySelector('.field-error');
        if (errorElement) {
            errorElement.remove();
        }
    }
    
    validateAll() {
        this.errors = {};
        let isValid = true;
        
        Object.keys(this.rules).forEach(fieldName => {
            const field = this.form.querySelector(`[name="${fieldName}"]`);
            if (field && !this.validateField(field)) {
                isValid = false;
            }
        });
        
        return isValid;
    }
    
    getErrors() {
        return this.errors;
    }
    
    hasErrors() {
        return Object.keys(this.errors).length > 0;
    }
};
</script>

<!-- ì¢‹ì•„ìš”/ì°œí•˜ê¸° ëª¨ë“ˆ -->
<script>
Ddoksang.FavoriteManager = class {
    constructor() {
        this.init();
    }
    
    init() {
        this.bindEvents();
    }
    
    bindEvents() {
        document.addEventListener('click', (e) => {
            if (e.target.matches('[data-favorite-btn]') || e.target.closest('[data-favorite-btn]')) {
                const btn = e.target.matches('[data-favorite-btn]') ? e.target : e.target.closest('[data-favorite-btn]');
                this.handleFavoriteClick(btn);
            }
        });
    }
    
    async handleFavoriteClick(button) {
        const cafeId = button.dataset.cafeId;
        if (!cafeId) return;
        
        try {
            const response = await Ddoksang.Utils.apiRequest(`/ddoksang/favorite/${cafeId}/toggle/`, {
                method: 'POST'
            });
            
            if (response.is_favorited) {
                button.textContent = 'â¤ï¸';
                button.classList.add('favorited');
                Ddoksang.Utils.showToast('ì°œ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else {
                button.textContent = 'ğŸ¤';
                button.classList.remove('favorited');
                Ddoksang.Utils.showToast('ì°œ ëª©ë¡ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            }
            
            Ddoksang.events.emit('favoriteChanged', {
                cafeId: cafeId,
                isFavorited: response.is_favorited
            });
            
        } catch (error) {
            console.error('ì°œí•˜ê¸° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
            Ddoksang.Utils.showToast('ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
        }
    }
};
</script>

<!-- ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // ì „ì—­ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    
    // ì°œí•˜ê¸° ë§¤ë‹ˆì € ì´ˆê¸°í™”
    if (document.querySelector('[data-favorite-btn]')) {
        Ddoksang.favoriteManager = new Ddoksang.FavoriteManager();
    }
    
    
    // ì´ë¯¸ì§€ ì—…ë¡œë” ì´ˆê¸°í™”
    const imageUploadContainer = document.querySelector('#image-upload-container');
    if (imageUploadContainer) {
        Ddoksang.imageUploader = new Ddoksang.ImageUploader('#image-upload-container', {
            maxFiles: 5,
            maxFileSize: 5 * 1024 * 1024 // 5MB
        });
    }
    
    // ë‹¤ë‹¨ê³„ í¼ ì´ˆê¸°í™”
    const multiStepForm = document.querySelector('#multiStepForm');
    if (multiStepForm) {
        Ddoksang.multiStepForm = new Ddoksang.MultiStepForm('#multiStepForm');
    }
    
    // ì¥ì†Œ ê²€ìƒ‰ ì´ˆê¸°í™”
    const placeSearchInput = document.querySelector('#place-search');
    const mapContainer = document.querySelector('#map');
    if (placeSearchInput && mapContainer && window.kakao) {
        Ddoksang.placeSearch = new Ddoksang.PlaceSearch('#place-search', '#map');
    }
    
    // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” (ì§€ë„ í˜ì´ì§€ìš©)
    const mapContainerMain = document.querySelector('#mapContainer');
    if (mapContainerMain && window.kakao) {
        Ddoksang.kakaoMap = new Ddoksang.KakaoMap('mapContainer', {
            level: 5
        });
        
        // ìƒì¼ì¹´í˜ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ë§ˆì»¤ ì¶”ê°€
        if (window.bdayCafesData) {
            window.bdayCafesData.forEach(cafe => {
                Ddoksang.kakaoMap.addCafeMarker(cafe);
            });
            
            // ë§ˆì»¤ë“¤ì´ ëª¨ë‘ ë³´ì´ë„ë¡ ì§€ë„ ë²”ìœ„ ì¡°ì •
            if (window.bdayCafesData.length > 0) {
                Ddoksang.kakaoMap.setBounds();
            }
        }
    }
    
    // ì „ì—­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    Ddoksang.events.on('memberSelected', (data) => {
        console.log('ë©¤ë²„ ì„ íƒë¨:', data);
    });
    
    Ddoksang.events.on('placeSelected', (data) => {
        console.log('ì¥ì†Œ ì„ íƒë¨:', data);
    });
    
    Ddoksang.events.on('filesChanged', (files) => {
        console.log('íŒŒì¼ ë³€ê²½ë¨:', files);
    });
});

// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ì„ ì „ì—­ìœ¼ë¡œ ë…¸ì¶œ
window.showToast = Ddoksang.Utils.showToast;
window.showLoading = Ddoksang.Utils.showLoading;

// ê°œë°œìš© ì½˜ì†” ë¡œê·¸
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    console.log('ğŸ‚ Ddoksang JavaScript ëª¨ë“ˆì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
    console.log('ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“ˆ:', Object.keys(Ddoksang));
}
</script>