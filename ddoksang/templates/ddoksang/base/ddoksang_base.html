{% extends "base.html" %}
{% load static %}
{% load filters %}

{% block body %}
  <!-- 덕생 본문 콘텐츠 블록 -->
  <div class="max-w-6xl mx-auto px-4 py-10">
    {% block ddoksang_content %}
    <!-- 하위 템플릿에서 이 부분을 덮어씀 -->
    {% endblock %}
  </div>

  <!-- Base 템플릿에 JavaScript 로드 (한 번만) -->
  {% csrf_token %}
  <script src="{% static 'js/favorite.js' %}"></script>
  <script src="{% static 'js/autocomplete.js' %}"></script>
  <script src="{% static 'js/ddoksang_ui_components.js' %}"></script>
  <script src="{% static 'js/ddoksang_maps.js' %}"></script> 
  
  {% block extra_js %}
  <!-- 하위 템플릿에서 추가 스크립트 -->
  {% endblock %}

  <!-- 찜하기 (favorite.js의 토스트 메세지 - detail.html에서 나오게 알림) -->
<script>
function showToast(message, type = 'info') {
  const toast = document.createElement('div');
  toast.className = `toast toast-${type}`;
  toast.textContent = message;

  Object.assign(toast.style, {
    position: 'fixed',
    bottom: '60px',
    left: '50%',
    transform: 'translateX(-50%)',
    backgroundColor: 
      type === 'success' ? '#10b981' : 
      type === 'warning' ? '#4b5563' : 
      '#333',
    color: '#fff',
    padding: '12px 20px',
    borderRadius: '9999px',
    boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
    zIndex: 9999,
    opacity: 0,
    transition: 'opacity 0.4s ease',
  });

  document.body.appendChild(toast);
  requestAnimationFrame(() => (toast.style.opacity = 1));

  setTimeout(() => {
    toast.style.opacity = 0;
    toast.addEventListener('transitionend', () => toast.remove());
  }, 2000);
}
</script>

{% endblock %}