
{% extends "base.html" %}
{% load static %}
{% load filters %}
{% load member_images %}

{% block title %}ğŸ‚ ë•ìƒ - ìƒì¼ì¹´í˜ íˆ¬ì–´ë§µ{% endblock %}

{% block body %}
<!-- âœ… ë°ì´í„° ìŠ¤í¬ë¦½íŠ¸ -->
{% csrf_token %}
{{ cafes_json|json_script:"cafes-data" }}
<script id="user-favorites-data" type="application/json">{{ user_favorites|safe }}</script>

<!-- âœ… ìœ„ì¹˜ ë™ì˜ ëª¨ë‹¬ -->
<div id="locationModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 hidden">
  <div class="bg-white rounded-2xl p-6 sm:p-8 max-w-md w-full mx-4 shadow-2xl">
    <div class="text-center">
      <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-6 h-6 sm:w-8 sm:h-8 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      </div>
      <h2 class="text-lg sm:text-xl font-bold text-gray-900 mb-2">ìœ„ì¹˜ ì •ë³´ ì‚¬ìš© ë™ì˜</h2>
      <p class="text-sm sm:text-base text-gray-600 mb-6 leading-relaxed">
        ë‚´ ì£¼ë³€ì˜ ìƒì¼ì¹´í˜ë¥¼ ì°¾ê¸° ìœ„í•´<br>ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
      </p>
      <div class="space-y-3">
        <button id="allowLocationBtn" class="w-full bg-gray-900 text-white py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg font-semibold hover:bg-gray-800 transition-all text-sm sm:text-base">ìœ„ì¹˜ ì •ë³´ í—ˆìš©</button>
        <button id="denyLocationBtn" class="w-full bg-gray-100 text-gray-700 py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg font-medium hover:bg-gray-200 text-sm sm:text-base">ê±°ë¶€í•˜ê³  ê¸°ë³¸ ì§€ë„</button>
      </div>
      <p class="text-xs text-gray-500 mt-4">ìœ„ì¹˜ ì •ë³´ëŠ” ê²€ìƒ‰ì—ë§Œ ì‚¬ìš©ë˜ë©° ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
    </div>
  </div>
</div>

<!-- âœ… ìƒë‹¨ ê²€ìƒ‰ í—¤ë” -->
{% include "ddoksang/components/_ddoksang_header.html" %}

<!-- âœ… ë©”ì¸ ì½˜í…ì¸  -->
<div class="max-w-7xl mx-auto">

  <!-- âœ… ìƒì¼ ì•„í‹°ìŠ¤íŠ¸ ìºëŸ¬ì…€ -->
  {% include "ddoksang/components/_artist_carousel.html" %}

  <!-- âœ… ë‚´ê°€ ì°œí•œ ìƒì¹´ ìºëŸ¬ì…€ -->
  {% if user.is_authenticated and my_favorite_cafes %}
    {% include "ddoksang/components/_cafe_card_list.html" with cafes=my_favorite_cafes section_title="ğŸ’– ë‚´ê°€ ì°œí•œ ë•ì˜ ìƒì¹´" empty_message="ì°œí•œ ìƒì¹´ê°€ ì—†ìŠµë‹ˆë‹¤." %}
  {% endif %}

  <!-- âœ… ìµœì‹  ìƒì¼ì¹´í˜ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ -->
  {% include "ddoksang/components/_cafe_card_list.html" with cafes=latest_cafes section_title="ğŸ†• ìµœì‹  ìƒì¼ì¹´í˜" empty_message="ì•„ì§ ë“±ë¡ëœ ìƒì¹´ê°€ ì—†ìŠµë‹ˆë‹¤." %}
</div>

<!-- âœ… ìƒì¹´ ëª¨ë‹¬ (ì§€ë„ìš©) -->


<!-- âœ… í”Œë¡œíŒ… ë²„íŠ¼ -->
{% include "ddoksang/components/_floating_button.html" %}

<!-- âœ… ìë°”ìŠ¤í¬ë¦½íŠ¸ ëª¨ë“ˆ ë¡œë“œ -->
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey={{ KAKAO_MAP_API_KEY }}&libraries=services,clusterer"></script>
{% include "ddoksang/components/_javascript_modules.html" %}
<script src="{% static 'js/maps.js' %}"></script>

{% endblock %}
\