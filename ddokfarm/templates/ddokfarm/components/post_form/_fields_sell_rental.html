<!-- 가격 -->
<div class="mb-6">
  <label for="{{ form.price.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">가격</label>
  {{ form.price }}
  {% if form.price.errors %}<p class="text-red-500 text-sm mt-1">{{ form.price.errors.0 }}</p>{% endif %}
</div>

<!-- 종류-->
<div class="mb-6">
  <label for="{{ form.md.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">종류</label>
  {{ form.md }}
  {% if form.md.errors %}<p class="text-red-500 text-sm mt-1">{{ form.md.errors.0 }}</p>{% endif %}
</div>

<!-- 거래 방식 -->
<div class="mb-6">
  <label for="{{ form.want_to.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">거래 방식</label>
  {{ form.want_to }}
  {% if form.want_to.errors %}<p class="text-red-500 text-sm mt-1">{{ form.want_to.errors.0 }}</p>{% endif %}
</div>

<!-- 상품 상태 -->
<div class="mb-6">
  <label for="{{ form.condition.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">상품 상태</label>
  {{ form.condition }}
  {% if form.condition.errors %}<p class="text-red-500 text-sm mt-1">{{ form.condition.errors.0 }}</p>{% endif %}
</div>

<!-- 배송 방법 -->
<div class="mb-6">
  <label for="{{ form.shipping.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">배송 방법</label>
  {{ form.shipping }}
  {% if form.shipping.errors %}<p class="text-red-500 text-sm mt-1">{{ form.shipping.errors.0 }}</p>{% endif %}
</div>

<!-- 직거래 장소 - 조건부 표시 -->
<div class="mb-6" id="location-field" style="display: none;">
  <label for="{{ form.location.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">직거래 희망 장소</label>
  {{ form.location }}
  {% if form.location.errors %}<p class="text-red-500 text-sm mt-1">{{ form.location.errors.0 }}</p>{% endif %}
</div>

{# rental 전용 필드 #}
{% if category == 'rental' %}
  <div class="mb-6">
    <label for="{{ form.start_date.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">대여 시작일</label>
    {{ form.start_date }}
    {% if form.start_date.errors %}<p class="text-red-500 text-sm mt-1">{{ form.start_date.errors.0 }}</p>{% endif %}
  </div>
  <div class="mb-6">
    <label for="{{ form.end_date.id_for_label }}" class="block text-lg font-bold text-gray-900 mb-1">대여 종료일</label>
    {{ form.end_date }}
    {% if form.end_date.errors %}<p class="text-red-500 text-sm mt-1">{{ form.end_date.errors.0 }}</p>{% endif %}
  </div>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  const shippingElements = document.querySelectorAll('input[name="shipping"]');
  const locationField = document.getElementById('location-field');
  
  function toggleLocationField() {
    const selectedShipping = document.querySelector('input[name="shipping"]:checked');
    if (selectedShipping) {
      const value = selectedShipping.value;
      // 직거래 또는 직거래+택배인 경우에만 표시
      if (value === 'direct' || value === 'both') {
        locationField.style.display = 'block';
      } else {
        locationField.style.display = 'none';
      }
    }
  }
  
  // 초기 상태 설정 (수정 모드에서 기존 값이 있을 경우)
  toggleLocationField();
  
  // 배송 방법 변경 감지
  shippingElements.forEach(function(element) {
    element.addEventListener('change', toggleLocationField);
  });
});
</script>