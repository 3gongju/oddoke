<!-- 정렬 및 필터 섹션 -->
<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 p-4 bg-gray-50 rounded-lg">
  <!-- 정렬 드롭다운 -->
  <div class="flex items-center gap-2">
    <label for="sort-select" class="text-sm font-medium text-gray-700">정렬:</label>
    <select id="sort-select" 
            class="px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-pink-400">
      <option value="latest" {% if sort_by == 'latest' %}selected{% endif %}>최신순</option>
      <option value="price_low" {% if sort_by == 'price_low' %}selected{% endif %}>낮은 가격순</option>
      <option value="price_high" {% if sort_by == 'price_high' %}selected{% endif %}>높은 가격순</option>
      <option value="likes" {% if sort_by == 'likes' %}selected{% endif %}>찜 많은 순</option>
    </select>
  </div>

  <!-- 판매중 상품만 보기 체크박스 -->
  <div class="flex items-center gap-2">
    <input type="checkbox" 
           id="available-only" 
           {% if show_available_only %}checked{% endif %}
           class="w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500">
    <label for="available-only" class="text-sm font-medium text-gray-700">
      판매중인 상품만 보기
    </label>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const sortSelect = document.getElementById('sort-select');
  const availableOnlyCheckbox = document.getElementById('available-only');
  
  function updateURL() {
    const url = new URL(window.location);
    const params = new URLSearchParams(url.search);
    
    // 정렬 파라미터 업데이트
    params.set('sort', sortSelect.value);
    
    // 판매중 필터 파라미터 업데이트
    if (availableOnlyCheckbox.checked) {
      params.set('available_only', 'on');
    } else {
      params.delete('available_only');
    }
    
    // URL 업데이트 및 페이지 리로드
    url.search = params.toString();
    window.location.href = url.toString();
  }
  
  // 이벤트 리스너 등록
  sortSelect.addEventListener('change', updateURL);
  availableOnlyCheckbox.addEventListener('change', updateURL);
});
</script>