<!-- create_form_script.html -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const imageInput = document.getElementById('id_image');
    const locationField = document.getElementById('location-field');
    const directDealRadios = document.querySelectorAll('input[name="direct_deal"]');

    // 이미지 미리보기
    if (imageInput) {
      imageInput.addEventListener('change', function () {
        const file = imageInput.files[0];
        if (file) {
          const preview = document.createElement('img');
          preview.src = URL.createObjectURL(file);
          preview.className = 'mt-2 w-32 h-32 object-cover rounded-md';
          preview.id = 'image-preview';
          const existing = document.getElementById('image-preview');
          if (existing) existing.remove();
          imageInput.parentNode.appendChild(preview);
        }
      });
    }

    // 직거래 여부 토글
    directDealRadios.forEach(radio => {
      radio.addEventListener('change', function () {
        if (this.value === 'possible') {
          locationField.classList.remove('hidden');
        } else {
          locationField.classList.add('hidden');
        }
      });
    });
  });
</script>
