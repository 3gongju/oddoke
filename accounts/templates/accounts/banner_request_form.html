<!-- λ°°λ„ μ‹ μ²­ λ¨λ‹¬ νΌ -->
<div class="bg-white rounded-lg max-w-md w-full mx-4 relative">
  <!-- ν—¤λ” -->
  <div class="flex justify-between items-center p-6 border-b">
    <h3 class="text-lg font-semibold text-gray-900">λ°°λ„ μ‹ μ²­</h3>
    <button onclick="closeBannerModal()" class="text-gray-400 hover:text-gray-600">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <!-- νΌ λ‚΄μ© -->
  <form id="bannerRequestForm" enctype="multipart/form-data" class="p-6">
    {% csrf_token %}
    
    <!-- ν¬μΈνΈ μ •λ³΄ -->
    <div class="mb-4 p-4 bg-purple-50 rounded-lg">
      <div class="flex justify-between items-center">
        <span class="text-sm font-medium text-purple-700">ν•„μ” ν¬μΈνΈ:</span>
        <span class="text-lg font-bold text-purple-600">{{ required_points }}λ•</span>
      </div>
      <div class="flex justify-between items-center mt-2">
        <span class="text-sm text-gray-600">λ³΄μ  ν¬μΈνΈ:</span>
        <span class="text-lg font-semibold {% if can_afford %}text-green-600{% else %}text-red-600{% endif %}">
          {{ user_points }}λ•
        </span>
      </div>
    </div>

    {% if not can_afford %}
    <div class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
      <p class="text-red-700 text-sm">λ• ν¬μΈνΈκ°€ λ¶€μ΅±ν•©λ‹λ‹¤. μƒμΌ λ§μ¶”κΈ° κ²μ„μΌλ΅ ν¬μΈνΈλ¥Ό λ¨μ•„λ³΄μ„Έμ”!</p>
    </div>
    {% endif %}

    <!-- μ•„ν‹°μ¤νΈλ… -->
    <div class="mb-4">
      <label for="{{ form.artist_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
        μ•„ν‹°μ¤νΈλ… *
      </label>
      <input type="text" 
             name="artist_name" 
             id="{{ form.artist_name.id_for_label }}"
             required
             class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
             placeholder="μ•„ν‹°μ¤νΈλ…μ„ μ…λ ¥ν•μ„Έμ”">
    </div>

    <!-- λ°°λ„ μ΄λ―Έμ§€ -->
    <div class="mb-4">
      <label for="{{ form.banner_image.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
        λ°°λ„ μ΄λ―Έμ§€ *
      </label>
      <input type="file" 
             name="banner_image" 
             id="{{ form.banner_image.id_for_label }}"
             accept="image/*"
             required
             class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
      <p class="text-xs text-gray-500 mt-1">κ¶μ¥ ν¬κΈ°: 1200x400px, μµλ€ 5MB, JPG/PNG</p>
    </div>

    <!-- μ•λ‚΄μ‚¬ν•­ -->
    <div class="mb-6 p-4 bg-yellow-50 rounded-lg">
      <h4 class="text-sm font-medium text-yellow-800 mb-2">β οΈ μ•λ‚΄μ‚¬ν•­</h4>
      <ul class="text-xs text-yellow-700 space-y-1">
        <li>β€Ά μΉμΈ μ‹ 3μΌκ°„ λ©”μΈ νμ΄μ§€μ— ν‘μ‹λ©λ‹λ‹¤</li>
        <li>β€Ά λ¶€μ μ ν• λ‚΄μ©μ€ κ±°μ λ  μ μμµλ‹λ‹¤</li>
        <li>β€Ά κ±°μ  μ‹ ν¬μΈνΈκ°€ ν™λ¶λ©λ‹λ‹¤</li>
      </ul>
    </div>

    <!-- λ²„νΌλ“¤ -->
    <div class="flex space-x-3">
      <button type="button" onclick="closeBannerModal()" 
              class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
        μ·¨μ†
      </button>
      <button type="submit" {% if not can_afford %}disabled{% endif %}
              class="flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
        μ‹ μ²­ν•κΈ° ({{ required_points }}λ•)
      </button>
    </div>
  </form>
</div>

<!-- <script>
// νΌ μ μ¶ μ΄λ²¤νΈ μ²λ¦¬
document.getElementById('bannerRequestForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  console.log('π”¥ λ°°λ„ μ‹ μ²­ νΌ μ μ¶λ¨');
  
  const formData = new FormData(this);
  
  // ν•„μ ν•„λ“ ν™•μΈ
  const artistName = formData.get('artist_name');
  const bannerImage = formData.get('banner_image');
  
  if (!artistName || !bannerImage || bannerImage.size === 0) {
    showToast('μ•„ν‹°μ¤νΈλ…κ³Ό λ°°λ„ μ΄λ―Έμ§€λ¥Ό λ¨λ‘ μ…λ ¥ν•΄μ£Όμ„Έμ”.', 'error');
    return;
  }
  
  // μ„λ²„λ΅ μ „μ†΅
  fetch('/accounts/banner-request/', {
    method: 'POST',
    body: formData,
    headers: {
      'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
    }
  })
  .then(response => {
    console.log('π”¥ μ„λ²„ μ‘λ‹µ μƒνƒ:', response.status);
    return response.json();
  })
  .then(data => {
    console.log('π”¥ μ„λ²„ μ‘λ‹µ λ°μ΄ν„°:', data);
    
    if (data.success) {
      showToast(data.message, 'success');
      closeBannerModal();
      // νμ΄μ§€ μƒλ΅κ³ μΉ¨ν•΄μ„ μ—…λ°μ΄νΈλ ν¬μΈνΈ ν‘μ‹
      setTimeout(() => location.reload(), 1500);
    } else {
      showToast(data.error, 'error');
    }
  })
  .catch(error => {
    console.error('π”¥ λ°°λ„ μ‹ μ²­ μ¤λ¥:', error);
    showToast('λ°°λ„ μ‹ μ²­ μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤.', 'error');
  });
});
</script> -->